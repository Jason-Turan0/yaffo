{% from "components/htmx_pagination.html" import htmx_pagination %}


<form id="duplicates-form" hx-post="{{ url_for('utilities_remove_duplicates_results_form', job_id=job_id) }}"
      hx-target="#duplicates-form"
      hx-swap="outerHTML">
    {% include "utilities/remove_duplicates_results_form_header.html" %}
    <div class="section">
        <h2>Duplicate Groups</h2>
        {% for group in view_model.group_page %}
            <div class="duplicate-group">
                <h3>Group {{ group.group_id + 1 }}</h3>
                <div class="photo-grid">
                    {% for path in group.paths %}
                        {% include "utilities/remove_duplicates_photo_card.html" with context %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
        {{ htmx_pagination(
            pagination=view_model.pagination,
            hx_endpoint=url_for('utilities_remove_duplicates_results_form', job_id=view_model.job_id),
            hx_target="#duplicates-form"
        ) }}
    </div>
</form>